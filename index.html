<!-- ATM Rabl√°s Jelent√©s -->
<section id="atm-report">
    <h2>üí£ ATM Rabl√°s Jelent√©s</h2>
    <div class="report-form">
        <form id="atm-form">

            <input type="number" 
                   name="dirtymoney" 
                   placeholder="Piszkosp√©nz mennyis√©g ($)" 
                   min="1" 
                   required>

            <input type="text" 
                   name="name" 
                   placeholder="Neved" 
                   required>

            <input type="datetime-local" 
                   name="time" 
                   required>

            <input type="url" 
                   name="imgur" 
                   placeholder="Imgur link helye (https://imgur.com/...)" 
                   pattern="https://(i\.)?imgur\.com/.*" 
                   required>

            <button type="submit">K√ºld√©s</button>

        </form>

        <p id="atm-message" style="text-align:center; margin-top:10px;"></p>
    </div>
</section>

<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
emailjs.init("PUBLICKEY"); // Public Key

const form = document.getElementById("atm-form");
const message = document.getElementById("atm-message");

form.addEventListener("submit", function(e){
    e.preventDefault();

    const btn = this.querySelector("button");
    btn.disabled = true;
    btn.textContent = "K√ºld√©s...";

    emailjs.sendForm(
        "service_xxxxxx",      // Service ID
        "template_xxxxx",     // Template ID
        this
    )
    .then(() => {
        showMessage("‚úÖ ATM jelent√©s sikeresen elk√ºldve!", "success");
        form.reset(); // csak az √∫j adat maradjon, r√©git nem tart meg
    })
    .catch(() => {
        showMessage("‚ùå Hiba t√∂rt√©nt, pr√≥b√°ld √∫jra!", "error");
    })
    .finally(() => {
        btn.disabled = false;
        btn.textContent = "K√ºld√©s";
    });
});

function showMessage(msg, type) {
    message.textContent = msg;
    message.className = type;
    setTimeout(() => {
        message.textContent = "";
        message.className = "";
    }, 5000);
}
</script>
